(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{363:function(n,s,a){"use strict";a.r(s);var t=a(0),e=Object(t.a)({},(function(){var n=this,s=n.$createElement,a=n._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[a("h1",{attrs:{id:"rabbitmq的简单说明"}},[n._v("rabbitmq的简单说明")]),n._v(" "),a("h2",{attrs:{id:"安装"}},[n._v("安装")]),n._v(" "),a("h3",{attrs:{id:"采用docker安装"}},[n._v("采用docker安装")]),n._v(" "),a("p",[a("code",[n._v("sudo docker pull rabbitmq:3.7-management")])]),n._v(" "),a("h3",{attrs:{id:"启动"}},[n._v("启动")]),n._v(" "),a("p",[a("code",[n._v("sudo docker run -d --hostname localhost --name myrabbit -p 15672:15672 -p 5672:5672 rabbitmq:3.7-management")])]),n._v(" "),a("h2",{attrs:{id:"端口连接说明"}},[n._v("端口连接说明")]),n._v(" "),a("h3",{attrs:{id:"管理后台登录：127-0-0-1-15672"}},[n._v("管理后台登录：127.0.0.1:15672")]),n._v(" "),a("h3",{attrs:{id:"连接rabbitmq"}},[n._v("连接rabbitmq:")]),n._v(" "),a("p",[n._v("1、定义mqurl\n"),a("code",[n._v("// url格式 amqp://账号：密码@host:port/vhost")]),n._v(" "),a("code",[n._v('MQURL = "amqp://imoocuser:imoocuser@127.0.0.1:5672/imooc"')])]),n._v(" "),a("p",[n._v("2、定义结构体")]),n._v(" "),a("div",{staticClass:"language-golang line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("type RabbitMQ struct {\n\tconn    *amqp.Connection\n\tchannel *amqp.Channel\n\t//队列名称\n\tQueueName string\n\t//交换机\n\tExchange string\n\t//key\n\tKey string\n\t//连接信息\n\tMqurl string\n}\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br")])]),a("p",[n._v("3、创建结构体实例")]),n._v(" "),a("div",{staticClass:"language-golang line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('func NewRabbitMQ(queueName string, exchange string, key string) *RabbitMQ {\n\trabbitmq := &RabbitMQ{QueueName: queueName, Exchange: exchange, Key: key, Mqurl: MQURL}\n\tvar err error\n\t//创建rabbitmq连接\n\trabbitmq.conn, err = amqp.Dial(rabbitmq.Mqurl)\n\trabbitmq.failOnErr(err, "创建连接错误")\n\trabbitmq.channel, err = rabbitmq.conn.Channel()\n\trabbitmq.failOnErr(err, "获取channel失败")\n\treturn rabbitmq\n}\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br")])]),a("h3",{attrs:{id:"其他管理"}},[n._v("其他管理")]),n._v(" "),a("p",[n._v("1、断开连接")]),n._v(" "),a("div",{staticClass:"language-golang line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("func (r *RabbitMQ) Destory() {\n\t_ = r.channel.Close()\n\t_ = r.conn.Close()\n}\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br")])]),a("p",[n._v("2、错误处理函数")]),n._v(" "),a("div",{staticClass:"language-golang line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('func (r *RabbitMQ) failOnErr(err error, message string) {\n\tif err != nil {\n\t\tlog.Fatalf("%s,%s", message, err)\n\t\tpanic(fmt.Sprintf("%s,%s", message, err))\n\t}\n}\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);